!function(ng){ng.module("D6App").controller("AppCtlr",["$scope","$location","D6Auth",function($scope,$location,$auth){"use strict";function checkAuth(){$auth.user.authenticated||"/login"===$location.path()?$auth.user.authenticated&&"/login"===$location.path()&&$location.url(lastPath):(lastPath=$location.url(),$location.path("/login"))}function setLastPath(){"/login"!==$location.path()&&(lastPath=$location.url())}var lastPath="/";$scope.$on("$locationChangeSuccess",setLastPath),$scope.$watch("user.authenticated",checkAuth),$scope.$on("$locationChangeStart",checkAuth),$scope.user=$auth.user}])}(angular);