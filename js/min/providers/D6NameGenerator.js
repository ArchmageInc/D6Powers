!function(ng){ng.module("D6App").factory("D6NameGenerator",["D6Sock",function(Sock){"use strict";function getRandomName($names,prev){for(var rand=Math.round(Math.random()*($names.length-1)),name=$names[rand].$value||$names[rand];name===prev;)rand=Math.round(Math.random()*($names.length-1)),name=$names[rand].$value||$names[rand];return name}var $sock=new Sock("names"),all=$sock.get().then(function($names){for(var names={},i=0;i<$names.length;i++)names[$names[i].$id]=$names[i];return names}),D6NameGenerator={fullName:function(gender){return gender=-1!==["Male","Female"].indexOf(gender)?gender:"Male",all.then(function($names){return getRandomName($names.full[gender])})},alias:function(gender){return gender=-1!==["Male","Female"].indexOf(gender)?gender:"Male",all.then(function($names){return getRandomName($names.aliases[gender].concat($names.aliases.Both))})},sillyName:function(){return all.then(function($names){var firstName=getRandomName($names.silly),lastName=getRandomName($names.silly,firstName);return firstName+" "+lastName})},occupation:function(){var rand=Math.round(7549*Math.random()),$occupationSock=new Sock("occupations");return $occupationSock.get(rand).then(function($name){return $name.$value})}};return D6NameGenerator}])}(angular);